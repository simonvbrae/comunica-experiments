# Comunica Experiments

Collection of various small experiments with [Comunica](https://comunica.dev/). The experiments here are not ready for actual use anywhere, and are mostly just saved in case they will turn out to be useful later. There is nothing of interest here for most people, and nothing is guaranteed to work.

## Generation of test data

The [SolidBench](https://github.com/SolidBench/SolidBench.js) benchmark can be used to generate social network test data and example queries, and serve them using [Community Solid Server](https://github.com/CommunitySolidServer/CommunitySolidServer). For example, to generate data and then serve it using the default configuration:

```
yarn run generate
yarn run serve
```

Please check the SolidBench documentation for more details, especially the dependencies, as it requires Docker for the data generation part. The generated data will end up in the `out-fragments` folder in the workspace root.

## Generation of cardinality indexes for test data

The index generator tool, that is basically a dumb script that count things and makes a lot of assumptions, is located at [tools/index-generator](tools/index-generator/) and needs to be built before use. To build and run, from the workspace root:

```
yarn run build
yarn run index
```

The tool will generate, by default, `profile/cardinalities.ttl` file under each pod, and create a link to it in the WebID document. The document contains some data about the predicate counts, as well as the overall triple count inside a pod, and unique predicates and subjects. For example:

```
@prefix void: <http://rdfs.org/ns/void#>.
@prefix ldbcv: <http://localhost:3000/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>.
...

<http://localhost:3000/pods/00000000000000000065> a void:Dataset;
    void:triples 3410;
    void:distinctSubjects 471;
    void:distinctObjects 111;
    void:properties 36;
    void:propertyPartition [ a 332 ];
    void:propertyPartition [ ldbcv:id 313 ];
    void:propertyPartition [ ldbcv:creationDate 314 ];
    void:propertyPartition [ ldbcv:locationIP 313 ];
    ... etc.
```

Additionally, some of the pods appear to have Solid type indexes generated by the SolidBench tool, by the looks of it, but not all of them.

## Benchmarking with and without cardinality indexes

TODO
